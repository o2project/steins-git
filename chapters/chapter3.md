# 第三章 - 百家争鳴のセルビチウム

たとえばラボメンと共同で何か作業する場合、作業状況を共有するために Git リポジトリは必要です。しかしそのためにサーバーを用意して Git を設定してという手順をするのは面倒です。
GitHub があれば簡単にリポジトリを作れます。きっとダルあたりが「Git リポジトリを一から設定するのなんて面倒くさいだろ常考」とか言いながら GitHub 上に作業用のリポジトリを作ってくれることでしょう。

このように GitHub は Git リポジトリを作り保持できる Git リポジトリのホスティングサービスです。
GitHub はリポジトリを作って保持してくれるだけではなくチーム開発の役に立つさまざまな機能を持っています。それぞれの機能について見ていきましょう。

## Issue

Issue は現在のリポジトリにある問題点や改善点をみんなで議論できます。
未来ガジェット研究所でおこなわれている円卓会議をインターネット上でおこなえるものと考えれば問題ありません。

実際の Issue の例を見てみましょう。この Steins;Git を書き始めた当初に作った、対象の読者を決めるための Issue[^1] です。

![GitHub上で対象の読者について話している様子](/assets/images/ch3/github-issue.png)

まずこのようにしたいという提起があり、それに対してこうしたほうが良いのではないかという返信があることを確認できます。
その結果「ネタバレは気にせずしていく」「シュタゲのアニメを全話見た人か、ゲームを第 11 章までクリアした人」「Git を全く触ったことがない、もしくは触り始めたばかりの人」と方針を決めました。
このように Issue はお互いに議論しつつ、最終的にどういった方向性にするかという結論を出すのに使えます。

今回の例では関わる人数が少ない状態で議論していることからコメントの数は少ないですが、数十人やそれ以上が関わるリポジトリだと数十のコメントがある場合もあります。

## Pull Request

Pull Request は他のリポジトリに対して、問題点や改善したい点の修正をしたときに、その修正を取り込んでもらうよう依頼するときに使います。
例として自分が vivliostyle-ui というリポジトリに対して送った Pull Request[^2] を見てみます。
これはもともと JavaScript で書かれたコードを TypeScript に変換する Pull Request です。

![vivliostyle-uiに対して送ったJavaScriptで書かれたコードをTypeScriptへ変換するPull Request](https://i.gyazo.com/25ef15b95a8e7055b4e3c142461c87e6.png)

このように Pull Request の概要欄にこれはどのような Pull Request で、どういったきっかけでやることにしたのか、またやったことの詳細などが書かれています。

つまり Pull Request はラボメンが D メールや D ラインを送る場合に岡部倫太郎へ文言を見せたあと D メールや D ラインを送る行為です。
たとえば桐生萌郁が「携帯の機種変に失敗したので前の携帯を使い続ける」旨の D メールを送ろうとしたとき、岡部倫太郎に見せてから D メールを送りました。
これと同じことを GitHub 上でも Pull Request という形でおこなえます。

コードを見る人は見た結果を Pull Request を送った人に対して伝えられます。
これをコードレビューと言います。自分のリポジトリでない限りは送った Pull Request に対してコードレビューがあります。

![ただコメントするだけか、Pull Requestを承認または一旦拒否するかを選べる](https://i.gyazo.com/4c8c0a97a163d4f821ef425c6fe24945.png)

Steins;Gate で桐生萌郁が D メールを送る直前に文言を差し替えたことは、変更が問題ないと承認されてから変更を加えたことになります。
承認されていない変更なのでバグが起きる可能性もあります。実際に Steins;Gate では世界線変動が起きて岡部倫太郎の主観からは桐生萌郁が消えたように見えました。
そのため承認された後は何も変更を加えないようにするのが良いと言えます。
実際に GitHub 上にはコードレビューをした後にあらためてコードレビューをおこなわないとマージをおこなえなくする設定があります。

## Project

Project は Issue や Pull Request などを特定のまとまりにできます。

Project はオペレーションと言えます。
β 世界線の岡部倫太郎を奮い立たせるべく過去へ行き、そして戻れなくなった椎名まゆりと阿万音鈴羽を、岡部倫太郎が迎えに行くオペレーションがあります。
そのオペレーションに対して岡部倫太郎は「オペレーション・アルタイル」と名付けました。
この「オペレーション・アルタイル」というのが一つのプロジェクトと言えます。GitHub 上の Project にオペレーション・アルタイルがあった場合、次のような Issue などが登録されていることでしょう。

- タイムマシンを作る
- C203 型タイムマシンを追跡するためのレーダーを作る
- タイムマシンを発射する

## 脆弱性検知

脆弱性とは JIS Q 27000:2019[^3] の 3.77 によると次の意味になります。

> 一つ以上の脅威（3.74）によって付け込まれる可能性のある，資産又は管理策（3.14）の弱点。

同じく JIS の 3.74 の脅威を見てみると次の意味が書かれています。

> システム又は組織（3.50）に損害を与える可能性がある，望ましくないインシデントの潜在的な原因。

椎名かがりには牧瀬紅莉栖の記憶が移植されていました。また特定の音楽に反応し自分の意志とは関係なく行動をするように仕向けられていました。
移植の目的として牧瀬紅莉栖しか知りえない情報を椎名かがりを通して聞き出すことにあることが挙げられました。
これらは CAPEC で定義されている Remote Code Inclusion と言われる脆弱性[^4]でしょう。

GitHub にはこういった脆弱性を検知する仕組みが備わっています。
依存しているパッケージに脆弱性がある場合、次の画像のように脆弱性があることを GitHub のリポジトリページ上で表示してくれます。

![依存しているパッケージに脆弱性があることを知らせる表示](/assets/images/ch3/github-security.png)

## チームの管理

GitHub ではチームに関するさまざまな設定をおこなえます。
チームに所属させるには GitHub の organization という複数プロジェクトを一元管理するためのアカウントで招待します。

<!-- textlint-disable  web-plus-db -->

ここまでは未来ガジェット研究所において、岡部倫太郎がラボメンバッジを配る行為と同じです。

<!-- textlint-enable  web-plus-db -->

ただ GitHub の organization はただメンバーを属させるだけでなく、個々のリポジトリへのアクセス権を細かく設定できます。
岡部倫太郎が桐生萌郁に対して D メールに関する情報を渡しがらなかったり、比屋定真帆がレスキネン教授とレイエス教授の企みを盗み聞きしたりといった出来事が起こっていましたが、GitHub でアクセス権の管理をすればこういったことが起こらなくなります。

[^1] https://github.com/o2project/steins-git/issues/18
[^2] https://github.com/vivliostyle/vivliostyle-ui/pull/79
[^3] https://www.kikakurui.com/q/Q27000-2019-01.html
[^4] https://capec.mitre.org/data/definitions/253.html
