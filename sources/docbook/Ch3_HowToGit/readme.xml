<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<article lang="en">
<articleinfo>
    <date>2018-08-29</date>
</articleinfo>
<section id="chapter3-how-to-git">
<title>第三章 - 率先躬行のサインポスト</title>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="illustration/labmem.jpg"/>
  </imageobject>
  <textobject><phrase>ラボメン</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>これまで、Git とは何かという事や Git を使う理由について説明してきました。</simpara>
<simpara>これらを踏まえ、ここでは実際に Git の様々な操作方法を SourceTree<footnote><simpara><ulink url="https://www.atlassian.com/ja/software/sourcetree/overview</simpara></footnote>">https://www.atlassian.com/ja/software/sourcetree/overview]</ulink> GitHub for Mac<footnote><simpara><literal><ulink url="https://mac.github.com/</literal></simpara></footnote>footnote:">Windows 版は <ulink url="https://windows.github.com/">https://windows.github.com/</ulink></ulink> というソフトウェアを使用して説明します。</simpara>
<section id="sourcetree-settings">
<title>SourceTree のインストールと設定</title>
<simpara>SourceTree のダウンロードは以下のURLからおこなえます。SourceTree はWindows と Mac OS X に対応しています。</simpara>
<simpara><literal>https://www.atlassian.com/ja/software/sourcetree/overview</literal></simpara>
<simpara>SourceTree のダウンロードが終わったら、次にインストールと設定をおこないます。Windows と Mac OS X それぞれ説明が分かりやすいページがあるので、そのページを紹介しておきます。</simpara>
<itemizedlist>
<listitem>
<simpara>
Windows: <ulink url="http://blog.aotak.me/post/67349113824/sourcetree-tutorial-1">あおたくノート • SourceTreeとGitではじめるバージョン管理 #1</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
Mac OS X: <ulink url="http://www.backlog.jp/git-guide/intro/intro2_1.html">Gitのインストール【チュートリアル1 Gitの基本】 | サルでもわかるGit入門 〜バージョン管理を使いこなそう〜</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="githubapp-settings">
<title>GitHub for Windows (Mac) のインストールと設定</title>
<simpara>GitHub for Windows (Mac) のダウンロードは以下の URL からできます。SourceTree とは違い OS ごとに URL が違います。</simpara>
<itemizedlist>
<listitem>
<simpara>
Windows: <literal>https://windows.github.com/</literal>
</simpara>
</listitem>
<listitem>
<simpara>
Mac OS X: <literal>https://mac.github.com/</literal>
</simpara>
</listitem>
</itemizedlist>
<simpara>GitHub for Windows (Mac) のダウンロードが終わったら、次にインストールと設定をします。</simpara>
<simpara>GitHub for Mac 限定になってしまいますが、インストール後の設定や使い方について自分が書いた記事があるので紹介します。</simpara>
<simpara><ulink url="http://blog.kubosho.com/entry/how-to-github-for-mac">GitHub for Macのインストール後の設定と使い方 - I&#8217;m kubosho_</ulink></simpara>
</section>
<section id="git-init">
<title>Git によるバージョン管理を始める</title>
<simpara>任意のディレクトリで Git によるバージョン管理を始められるようにします。例えるならば、未来ガジェット研究所でタイムリープマシンが作られた状態にするものです。</simpara>
<section id="_sourcetree_でのやり方">
<title>SourceTree でのやり方</title>
<simpara>SourceTree を起動すると、ブックマークウインドウが表示されます。Windows 版の場合は SourceTree を起動した時に表示される画面の左端に表示されます。Mac 版の場合は 「Cmd + B」というショートカットキーで表示する事ができます。</simpara>
<simpara>そのブックマークウインドウの中で、三つ横並びに表示されているボタンのうち、一番左のボタンを押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-init/source-tree/buttons.jpg"/>
  </imageobject>
  <textobject><phrase>SourceTree のボタン</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ボタンを押すといくつか選択肢が表示されますが、その中の「リポジトリを作成」を選択します。すると、リポジトリの保存先ディレクトリや、名前を決める画面が表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-init/source-tree/dialog.jpg"/>
  </imageobject>
  <textobject><phrase>リポジトリ名を決めている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>情報を入力した上で「作成」ボタンを押すと、空のリポジトリができます。これでタイムリープマシンが作られた状態になります。</simpara>
<simpara>ただし、まだ今までの作業内容が無いので、過去に戻ったり改変するという事はできません。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-init/source-tree/empty.jpg"/>
  </imageobject>
  <textobject><phrase>リポジトリが作られた状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="_github_for_windows_mac_でのやり方">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>GitHub for Windows (Mac) を起動すると、左上に「＋」ボタンがあります。そのボタンを押して表示された画面の中にある「Create」を押します。</simpara>
<simpara>「Create」を押すと「Name」と「Local Path」を入力する欄が表示されます。「Name」にはリポジトリの名前を「Local Path」にはリポジトリを保存しておきたいディレクトリを入力します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-init/github-app/plus.jpg"/>
  </imageobject>
  <textobject><phrase>「＋」ボタンを押した後「Create」を押している様子</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>それぞれ入力して「Create Repository」ボタンを押すと、空のリポジトリができます。これでタイムリープマシンが作られた状態になります。しかし、やはり今までの作業内容が無いので、過去に戻ったり改変するという事はできません。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-init/github-app/done.jpg"/>
  </imageobject>
  <textobject><phrase>「リポジトリを作った後の画面</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-clone">
<title>すでにあるリモートリポジトリを使ってバージョン管理を始める</title>
<simpara>すでにあるリモートリポジトリを自分の PC 上へコピーし Git によるバージョン管理を始められるようにします。</simpara>
<simpara>その前に、リモートリポジトリについて少し説明をします。リモートリポジトリとは、自分の PC 以外にあるリポジトリの事を指します。</simpara>
<simpara>「自分の PC 以外にあるリポジトリ」ですが「インターネット上や誰かの PC 上にあるリポジトリ」を指します。</simpara>
<simpara>他の章で「ネットワーク上のリポジトリ」という言葉がありましたが、これは「リモートリポジトリ」と同じ意味です。</simpara>
<simpara>このリモートリポジトリを自分の PC 上にコピーするのがこれから説明する手順です。これにより、例えばラボメンなど、他の人と共同でタイムリープマシンを使って作業ができる体制が整います。</simpara>
<section id="_sourcetree_でのやり方_2">
<title>SourceTree でのやり方</title>
<simpara>では早速、すでにあるリポジトリのを自分の PC 上に作りましょう。再び SourceTree 上でブックマークウインドウを表示します。</simpara>
<simpara>そのブックマークウインドウの中で、三つ横並びに表示されているボタンのうち、一番左のボタンを押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-clone/source-tree/button-select.jpg"/>
  </imageobject>
  <textobject><phrase>SourceTree のボタン</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ボタンを押すといくつか選択肢が表示されますが、その中の「リポジトリをクローン」を選択します。すると、リポジトリを保存するディレクトリや、名前を決める画面が表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-clone/source-tree/repository-select.jpg"/>
  </imageobject>
  <textobject><phrase>リポジトリを取得しようとしている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>「ソースパス / URL」の部分に <literal>\git@github.com:o2project/steins-gate.git</literal> を入力して「クローン」を押すと、GitHub 上にある「steins-gate」というリポジトリが自分の PC 上にコピーされます。</simpara>
</section>
<section id="_github_for_windows_mac_でのやり方_2">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>GitHub for Windows (Mac) を起動すると、左上に「＋」ボタンがあるので、それを押して表示された画面の「Clone」というのを押します。</simpara>
<simpara>「Clone」を押した後、リポジトリを見つけるための検索窓が表示されます。そこにリポジトリの名前を入力して、目的のものが見つかったら「Clone [リポジトリ名]」というボタンを押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-clone/github-app/git-clone-before.jpg"/>
  </imageobject>
  <textobject><phrase>クローンする対象のリポジトリを絞り込んでいるところ</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>「Clone [リポジトリ名]」というボタンを押すと、リポジトリを保存するディレクトリや名前を決める画面が表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-clone/github-app/git-clone-save.jpg"/>
  </imageobject>
  <textobject><phrase>クローンするリポジトリの名前を決めているところ</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>それぞれ入力して「Enter」を押せば、リモートリポジトリが自分の PC 上にコピーされます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-clone/github-app/git-clone-after.jpg"/>
  </imageobject>
  <textobject><phrase>リポジトリを自分の PC 上にコピーした後</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-commit">
<title>作業内容を記録する</title>
<simpara>作業した内容をリポジトリに記録します。例えるならば、Steins;Gate でストーリーを進めた後、セーブをするようなものです。</simpara>
<section id="_sourcetree_でのやり方_3">
<title>SourceTree でのやり方</title>
<simpara>リポジトリ内にファイルを新しく作成した場合 SourceTree 上ではファイル名の横に「？」が付く形で表示されます。これは、ファイルがまだバージョン管理されてない事を示しています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/source-tree/add-before.jpg"/>
  </imageobject>
  <textobject><phrase>変更したファイルにチェックを付ける前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>この状態でファイル名の左横にあるチェックボックスにチェックを付けると「ステージングエリア」といわれるところにファイルが移動します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/source-tree/add-after.jpg"/>
  </imageobject>
  <textobject><phrase>変更したファイルにチェックを付けた後</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>移動した状態で、画面の下部にある「コミットメッセージ」と書かれている場所に任意のメッセージを入力します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/source-tree/commit-before.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを入力する前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>入力した後「コミット」ボタンを押すと、作業した内容がリポジトリに記録されます。なお、初回以降は画面上部にある「コミット」ボタンを押す事により、メッセージを入力できます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/source-tree/commit-after.jpg"/>
  </imageobject>
  <textobject><phrase>コミットした後</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ちなみに、コミットメッセージなどが表示されている場所の「ラベル」部分に「HEAD」という記載がありますが、これは「現時点でどのブランチにいるかを判別する情報」です。つまり、世界線の観測ができているという事で、これを例えるならば、ダイバージェンスメーターです。</simpara>
</section>
<section id="_github_for_windows_mac_でのやり方_3">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>GitHub for Windows (Mac) では、リポジトリ内にファイルを新しく作成した場合、画面上部に「1 Change」と表示され、またファイル名の横にあるチェックボックスにチェックが付いた状態になります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/github-app/git-commit-before.jpg"/>
  </imageobject>
  <textobject><phrase>追加したファイルをコミットする前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><?asciidoc-pagebreak?></simpara>
<simpara>GitHub for Windows (Mac) の場合「ステージングエリア」にファイルを移動する必要はなく、そのまま画面下部でコミットメッセージを書く事ができます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/github-app/git-commit-message.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを入力している最中</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>コミットメッセージを書いて「Commit to master」というボタンを押すと、作業した内容がリポジトリに記録されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-commit/github-app/git-commit-after.jpg"/>
  </imageobject>
  <textobject><phrase>コミットした後</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-checkout-file">
<title>作業内容を無かった事にする</title>
<simpara>岡部は、ダルにメールを送信した後、秋葉原 UPX でタイムマシン理論についての講義を受けましたが、ディスカッションで紅莉栖に完全に論破されてしまいました。</simpara>
<simpara>岡部にとって、論破されたという事は無くしたい事象ですが Git であればそれができます。</simpara>
<simpara><?asciidoc-pagebreak?></simpara>
<section id="_sourcetree_でのやり方_4">
<title>SourceTree でのやり方</title>
<simpara>方法としては、作業内容を無かった事にするファイルを右クリックで選択し「リセット(Windows の場合は破棄)」を選択します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/source-tree/before.jpg"/>
  </imageobject>
  <textobject><phrase>作業内容を無かった事にする</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>変更を本当に破棄していいか確認の画面が表示されるので「OK」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/source-tree/confirm.jpg"/>
  </imageobject>
  <textobject><phrase>作業内容を無かった事にするか確認がされる</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><?asciidoc-pagebreak?></simpara>
<simpara>これで、紅莉栖に論破されたという事が無くなりました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/source-tree/after.jpg"/>
  </imageobject>
  <textobject><phrase>論破された事を無くした後</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><?asciidoc-pagebreak?></simpara>
</section>
<section id="_github_for_windows_mac_でのやり方_4">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>作業内容を無かった事にするファイルを右クリックで選択し「Discard Changes」を選択します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/github-app/git-checkout-before.jpg"/>
  </imageobject>
  <textobject><phrase>作業内容を無かった事にする</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>変更を本当に破棄していいか確認の画面が表示されるので「Discard Changes」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/github-app/git-checkout-confirm.jpg"/>
  </imageobject>
  <textobject><phrase>作業内容を無かった事にするか確認画面が表示される</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>これで、紅莉栖に論破されたという事が無くなりました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout-file/github-app/git-checkout-after.jpg"/>
  </imageobject>
  <textobject><phrase>作業内容が無かった事にされた</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-diff">
<title>作業内容の差分を見る</title>
<simpara>作業内容の差分を見ます。例えるならば、岡部が、まゆりが死んだ理由を前回まゆりが死んだ理由と比較し、そこから試行錯誤するようなものです。</simpara>
<simpara>SourceTree と GitHub for Windows (Mac) のどちらでも、特定の作業内容を選択する事で、その作業内容の一つ前の作業内容と比べてどのような変更をしたのか見る事ができます。</simpara>
<simpara>SourceTree では、以下のような見た目になります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-diff/source-tree/diff.jpg"/>
  </imageobject>
  <textobject><phrase>SourceTree で作業内容の差分を見ている例</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>GitHub for Windows (Mac) では、以下のような見た目になります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-diff/github-app/diff.jpg"/>
  </imageobject>
  <textobject><phrase>GitHub for Windows (Mac) で作業内容の差分を見ている例</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="git-branch">
<title>ブランチの一覧を見たり、新たにブランチを作る</title>
<simpara>ブランチの一覧を見たり、新たにブランチを作ったりします。「ブランチ」は例えるならば「世界線」となり、ブランチを作るという事は「世界線の観測」になります。</simpara>
<simpara>また、リポジトリには「HEAD」という「自分が今どのブランチ(世界線)にいるのか分かるファイル」があり、それはダイバージェンスメーターだと言えるでしょう。</simpara>
<simpara>では、ブランチを作る方法を説明していきます。なお、現在のブランチは「秋葉原が電気街となり、フェイリスのお父さんが生きている世界線」だとします。</simpara>
<simpara>「秋葉原が電気街となり、フェイリスのお父さんが生きている世界線」で鈴羽を引き止めるために、岡部が D メールを送信しました。ここまでの作業内容は以下のようになります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-branch/source-tree/before.jpg"/>
  </imageobject>
  <textobject><phrase>新たなブランチを作る前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>この状態から SourceTree もしくは GitHub for Windows (Mac) を使って「鈴羽を引き止めるために D メールを送信した後の世界線」というブランチを作ります。</simpara>
<section id="_sourcetree_でのやり方_5">
<title>SourceTree でのやり方</title>
<simpara>SourceTree の画面上部にある「ブランチ」を押すとブランチ名を入力する画面が表示されます。この画面内の新規ブランチの項目に任意の名前を入力します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-branch/source-tree/name.jpg"/>
  </imageobject>
  <textobject><phrase>ブランチ名を決めているところ</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>「ブランチを作成」を押すとブランチができた状態になり、かつ作ったブランチ(鈴羽を引き止めた世界線)に移動しています。世界線変動が起きました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-branch/source-tree/after.jpg"/>
  </imageobject>
  <textobject><phrase>ブランチを作った後</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="_github_for_windows_mac_でのやり方_5">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>現在のブランチ名が書かれている左横に「線が分岐していて分岐先に "＋" が書かれているボタン」があります。</simpara>
<simpara>このボタンを押すと「Create New Branch」という画面が表示され、そこには「Name」と「From」の二つの項目があります。「Name」には任意の名前を入力し「From」では分岐元のブランチを選択します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-branch/github-app/branch-create-before.jpg"/>
  </imageobject>
  <textobject><phrase>「Create New Branch」という画面が表示されている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>それぞれ情報を入力した後「Create Branch」というボタンを押す事により、新しいブランチが作られます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-branch/github-app/branch-create-after.jpg"/>
  </imageobject>
  <textobject><phrase>新規ブランチが作られた図</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-reset">
<title>作業内容をリセットする</title>
<simpara>作業内容を無かった事にします。例えるならば、タイムリープのようなものです。</simpara>
<simpara>「作業内容を無かった事にする」と似ていますが、違いとしては「すでにリポジトリに追加した作業内容も無かった事にできる」と「作業内容をリセットしたという事が履歴に残る」があります。</simpara>
<simpara>「作業内容を無かった事にする」はリーディング・シュタイナーが働かないので記憶から無くなってしまいますが「作業内容をリセットする」はリーディング・シュタイナーが働くため記憶に残る、と例えると分かりやすいかと思います。</simpara>
<simpara>話を戻しますが「鈴羽を引き止めた世界線」でいくつか作業をした結果、履歴が以下のようになりました。最新の作業内容は「SERN の襲撃によりまゆりが死んでしまった…」となっています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-reset-before.jpg"/>
  </imageobject>
  <textobject><phrase>鈴羽を引き止めた世界線でいくつか作業した後の状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ここで最新の作業内容である「SERN の襲撃によりまゆりが死んでしまった…」という作業を無かった事にして、紅莉栖がタイムリープマシンを完成させたところにタイムリープします。</simpara>
<simpara>タイムリープするためには、戻したい作業内容の一つ前の作業内容を右クリックで選択し「このコミットまで "ブランチ名" を元に戻す」を選択します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-reset-right-click.jpg"/>
  </imageobject>
  <textobject><phrase>git resetをおこなおうとしている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>これで、作業内容から「SERN の襲撃によりまゆりが死んでしまった…」というのが消えました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-reset-after.jpg"/>
  </imageobject>
  <textobject><phrase>git resetをした後の状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="git-rebase">
<title>作業内容を改変する</title>
<simpara>作業内容を改変します。例えるならば、タイムリープマシンを使って過去の作業をやり直す感じです。</simpara>
<simpara>電話レンジ(仮)を改造してタイムリープマシンができた後、萌郁やラウンダー達の襲撃もしくは他の要因により、まゆりが何度も死んでしまった状態の最新の作業内容ですが「ラウンダー追ってきて、まゆりが刺されて死んだ」となっています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-before.jpg"/>
  </imageobject>
  <textobject><phrase>まゆりが何度も死んでしまったときの作業内容</phrase></textobject>
</mediaobject>
</informalfigure>
<section id="_コミットメッセージを修正する">
<title>コミットメッセージを修正する</title>
<simpara>まず始めに、コミットメッセージを修正してみます。</simpara>
<simpara>先ほどの最新の作業内容を記録したコミットが「ラウンダー追ってきて」と、間に「が」が足りないメッセージになっています。これを修正するため、直したい対象の一つ前の作業内容を右クリックで選択し「"コミット番号" の子を対話形式でリベース」を選びます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-select.jpg"/>
  </imageobject>
  <textobject><phrase>対話形式でリベースを選択している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>すると、対象となる作業内容が表示されるので、コミットメッセージを直したい作業内容を選び、画面下部の「Edit message」を押します。すると、コミットメッセージを編集する画面が表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-now.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを編集している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>任意のコミットメッセージを書いた後「OK」ボタンを押すとコミットメッセージが修正されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-after.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを編集し終えた状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="_複数の作業内容を一つにまとめる">
<title>複数の作業内容を一つにまとめる</title>
<simpara>次に、まゆりが死んだと書かれた複数の履歴を一つにまとめます。直したい対象の一つ前の作業内容を右クリックで選択し「"コミット番号" の子を対話形式でリベース」を選びます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-right-click.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squash するべく親となるコミットを選択している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>今回は四つの作業内容を対象としました。ここから作業内容をまとめるには「Squash with previous」を三回押します。「まとめる作業内容の数 - 一回 Squash with previous を押す」と覚えるといいかもしれません。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-before.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squash しようとしている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>その後、まとめた作業内容のコミットメッセージを編集するために「Edit message」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-message-edit.jpg"/>
  </imageobject>
  <textobject><phrase>コミットをまとめた後コミットメッセージを編集している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>これで、まゆりが死んだと書かれた複数の履歴がまとめられました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-after.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squashした状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-checkout">
<title>ブランチを移動する</title>
<simpara>現在のブランチから別のブランチへ移動します。例えるならば D メールを送った結果、世界線変動が起こった状態を、任意のタイミングで起こせるというものです。</simpara>
<simpara>Git のブランチは「世界線」です。D メールによる世界線変動は、世界の状況に影響を及ぼしてましたが、Git ではそういった副作用が無く世界線の移動ができます。</simpara>
<simpara><?asciidoc-pagebreak?></simpara>
<section id="_sourcetree_でのやり方_6">
<title>SourceTree でのやり方</title>
<simpara>移動の方法は簡単で、画面左端に表示されているブランチ一覧から、移動したいブランチの名前をダブルクリックする事により、ブランチを移動できます。</simpara>
<simpara>以下の図では「鈴羽を引き止めた世界線」から「萌郁が IBN 5100 を手に入れた世界線」に移動しています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout.jpg"/>
  </imageobject>
  <textobject><phrase>ブランチを移動した後</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><?asciidoc-pagebreak?></simpara>
</section>
<section id="_github_for_windows_mac_でのやり方_6">
<title>GitHub for Windows (Mac) でのやり方</title>
<simpara>現在のブランチの名前部分をクリックするとブランチ一覧が表示されます。「Filter」と書かれているところではブランチの絞り込み検索ができます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout/github-app/git-branch-list.jpg"/>
  </imageobject>
  <textobject><phrase>ブランチ一覧を表示している図</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara><?asciidoc-pagebreak?></simpara>
<simpara>ここでは「鈴羽を引き止めた世界線」から「萌郁が IBN 5100 を手に入れた世界線」に移動しています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-checkout/github-app/git-checkout-after.jpg"/>
  </imageobject>
  <textobject><phrase>ブランチを移動した後の図</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
<section id="git-push">
<title>リモートリポジトリに作業内容を送る</title>
<simpara>自分がした作業内容を、リモートリポジトリに送ります。例えるならば、岡部が紅莉栖にまゆりを助けるべくあれこれしてきた事を共有する感じです。</simpara>
<simpara>今まで、岡部はまゆりを助けるために何度もタイムリープをおこなって奮闘してきましたが、その事を他のラボメンは知りません。</simpara>
<simpara>奮闘している事を知られないままタイムリープマシンを壊そうとしても、紅莉栖に止められるのはしかたないです。</simpara>
<simpara>なので、他のラボメン(今回の場合だと紅莉栖)に今まで岡部がしてきた作業内容を伝える必要があります。</simpara>
<simpara>画面上部の「プッシュ」を押します。初期設定では現在のブランチのみが選択されているので、その状態で「OK」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-push-branch-select.jpg"/>
  </imageobject>
  <textobject><phrase>git push 前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>プッシュが終わり、作業内容の一覧に「origin/ブランチ名」という文字が表示されるようになりました。なお、「origin」というのは、リモートリポジトリの事を指しています。</simpara>
<simpara>作業内容をリモートリポジトリに送ったとともに、紅莉栖にも今までの作業内容が伝わりました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-push-after.jpg"/>
  </imageobject>
  <textobject><phrase>git push 後</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="git-pull">
<title>リモートリポジトリの変更内容を自分の PC 上のリポジトリに取り込む</title>
<simpara>他人がした変更をリモートリポジトリから取得し、自分の PC 上のリポジトリに取り込みます。</simpara>
<simpara>リモートリポジトリでは、岡部以外にもラボメンが作業しています。例えば紅莉栖を見てみると、岡部の様子がおかしいのでタイムリープしてきたのか聞いていたり、マイフォークが欲しいと言った事を記録しています。</simpara>
<simpara>その場合、自分の PC 上のリポジトリ(鈴羽を引き止めた世界線)に比べ、リモートリポジトリ(origin/鈴羽を引き止めた世界線)が二つ進んでいます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-pull-before.jpg"/>
  </imageobject>
  <textobject><phrase>紅莉栖が作業している</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ここで、画面上部の「プル」を押します。基本は表示された画面内の「OK」を押すだけで良いです。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-pull-select.jpg"/>
  </imageobject>
  <textobject><phrase>pull してくるブランチを選んでいる状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>「OK」を押す事により、自分とリモートのリポジトリの作業内容が同期します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-pull-after.jpg"/>
  </imageobject>
  <textobject><phrase>自分の PC 上のリポジトリとリモートリポジトリの同期をとった</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="git-merge">
<title>別のブランチでの作業内容を取り込む</title>
<simpara>別ブランチの作業内容を現在のブランチに取り込みます。例えるならば、世界線を収束させるための作業です。</simpara>
<simpara>「鈴羽を引き止めた世界線」というブランチで作業をした結果、鈴羽がタイムトラベルを失敗して「失敗した失敗した失敗した失敗した失敗した」と何度も書いた手紙を書き残し、自殺してしまいました。</simpara>
<simpara>その結果、岡部は天王寺裕吾から鈴羽が書いた手紙を受け取る事になります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/before.jpg"/>
  </imageobject>
  <textobject><phrase>鈴羽を引き止めた世界線でいくつか作業をした例</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>それを無かった事にするため D メールを送り世界線を変動させて鈴羽を引き止めないようにします。その為には「秋葉原から萌えが消えた世界線」のブランチへ移動します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/branch-change.jpg"/>
  </imageobject>
  <textobject><phrase>秋葉原から萌えが消えた世界線に移動した</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>移動した後は D メールを送った状態が最新の状態となっています。この状態から「鈴羽を引き止めた世界線」でしてきた作業を「秋葉原から萌えが消えた世界線」に統合します。</simpara>
<simpara>方法としては、統合したいブランチの名前を右クリックして「"統合するブランチ名" を "統合させたいブランチ名" へマージ」を選択します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/select.jpg"/>
  </imageobject>
  <textobject><phrase>マージ対象のブランチを選択している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>選択すると、確認メッセージが表示されるので「確認する」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/confirm.jpg"/>
  </imageobject>
  <textobject><phrase>マージする際の確認メッセージ</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>すると「秋葉原から萌えが消えた世界線」に「鈴羽を引き止めた世界線」でしてきた作業内容が統合された状態になります。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/uncommit.jpg"/>
  </imageobject>
  <textobject><phrase>マージした後の状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>ただし、まだコミットはされていないのでコミットをしておきます。ここではコミットメッセージを「尾行は中止前のメールは SERN の罠というメールを送信した」としています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/commit-message.jpg"/>
  </imageobject>
  <textobject><phrase>マージした際のコミットメッセージを書いている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>コミットが完了しました。このように D メールを送信する感覚で、ブランチ同士を統合する事ができます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-merge/source-tree/after.jpg"/>
  </imageobject>
  <textobject><phrase>マージが完了した状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="git-sync">
<title>GitHub for Windows (Mac) でリモートリポジトリと同期する</title>
<simpara>GitHub for Windows (Mac) では画面の右上に「Sync」というボタンがあります。</simpara>
<simpara>これは、他の人がした作業内容をリモートリポジトリから取得して自分の PC 上のリポジトリに取り込みつつ、自分の PC 上のリポジトリに作業内容がある場合はそれをリモートリポジトリに送信します。</simpara>
<simpara>つまり「git push」と「git pull」を同時におこなうものと考えれば良いでしょう。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-sync/git-sync-before.jpg"/>
  </imageobject>
  <textobject><phrase>Sync を押す前</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>「Sync」を押すと、同期の進捗を表すバーが表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-sync/git-sync-after.jpg"/>
  </imageobject>
  <textobject><phrase>Sync を押して同期をしている</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
</article>
